*** Settings ***
Suite Setup                         Preparation
Suite Teardown                      Finish Suite
Library                             SeleniumLibrary
Library                             String
Resource                            ../../../resources/resource.robot
Resource                            ../../../resources/testData.robot

*** Test Cases ***
Sorting Usage History
    [Tags]                          Sorting
    Sorting Column                  2
    Sorting Column                  5
    Sorting Column                  6
    Sorting Column                  7
    Sorting Column                  8
    Sorting Column                  9

Usage History Filtration
    [Tags]                          Filtration
    Filter Check First Fields       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div[1]/div[2]/input         101
    Filter Check First Fields       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div[2]/div[2]/input         59
    Filter Check First Fields       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div[3]/div[2]/input         PAND F1X4LG6
    Filter Check First Fields       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div[4]/div[2]/input         12

Change Transaction State
    [Tags]                          Transaction Changes
    Click Element                   xpath://*[@id="root"]/div/div/div/div/div[1]/div/ul/li[6]/a
    Sleep                           3 seconds
    ${order number}                 Get Text            xpath://*[@id="root"]/div/div/div/div/div[2]/div/div[3]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[1]/td[1]
    Log To Console                  ${order number} is order number
    Set Global Variable             ${order number}
    Click Element                   xpath://*[@id="root"]/div/div/div/div/div[2]/div/div[3]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[1]/td[12]/div/div/button
    Go Down                         xpath:/html/body/div[2]/div[2]/div/div/div[2]/div/div/form/div/div[2]/div/div/div/span[1]/div[1]         SHIPPED
    Click Element                   xpath:/html/body/div[2]/div[2]/div/div/div[3]/div/button[2]
    Sleep                           5 seconds

Check New Record at Usage History page
    [Tags]                          Check new Record
    Click Element                   xpath://*[@id="root"]/div/div/div/div/div[1]/div/ul/li[5]/a
    Sleep                           3 seconds
    Filter Check First Fields       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div[1]/div[2]/input         ${order number}

*** Keywords ***
Preparation
    Goto Usage History
    Click Element                   id:pageDropDown
    Sleep                           1 second
    Click Element                   css:li.dropdown-item:nth-child(4) > a:nth-child(1)
    Sleep                           1 second
    Number Of Rows
    ${number of new row}=           Evaluate                    ${number of row}+1
    Set Global Variable             ${number of new row}

Number Of Rows
    ${number of row}                Get Element Count           xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr
    Set Global Variable             ${number of row}

Go Down
    [Arguments]                     ${fieldAdr}             ${field type}
    Click Element                   xpath:/html/body/div[2]/div[2]/div/div/div[2]/div/div/form/div/div[2]/div/div
    Press Key                       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div/div/form/div/div[2]/div/div/div/span[1]/div[2]            \ue015
    Press Key                       xpath:/html/body/div[2]/div[2]/div/div/div[2]/div/div/form/div/div[2]/div/div/div/span[1]/div[2]            \ue007              
    ${text buffer sub}              Get Text                 xpath:/html/body/div[2]/div[2]/div/div/div[2]/div/div/form/div/div[2]/div/div/div/span[1]/div[1]
    Sleep                           1 second
    Run Keyword If                  "${text buffer sub}"!="${field type}"        Go Down    ${fieldAdr}    ${field type}
