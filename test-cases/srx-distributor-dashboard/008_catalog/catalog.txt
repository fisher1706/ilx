*** Settings ***
Suite Setup                         Preparation
Suite Teardown                      Finish Suite
Library                             SeleniumLibrary
Library                             String
Resource                            ../../../resources/resource.robot
Resource                            ../../../resources/testData.robot

*** Variables ***
${number of new row}
${number of row}

*** Test Cases ***
Invalid Create New Product
    Click Element                   css:.btn-primary
    #Is Add Product
    Click Element                   css:.close
    Sleep                           2 second
    Is Catalog
    Click Element                   css:.btn-primary
    Press Key                       id:partSku_id               \ue004
    Element Should Be Enabled       css:div.item-form-field:nth-child(1) > div:nth-child(2) > span:nth-child(2) > svg:nth-child(1) > path:nth-child(1)
    Press Key                       id:shortDescription_id      \ue004
    Element Should Be Visible       css:div.item-form-field:nth-child(2) > div:nth-child(2) > span:nth-child(2) > svg:nth-child(1) > path:nth-child(1)
    Press Key                       id:roundBuy_id              \ue004
    Element Should Be Visible       css:div.item-form-field:nth-child(3) > div:nth-child(2) > span:nth-child(2) > svg:nth-child(1) > path:nth-child(1)
    Press Key                       id:unitOfMeasure_id         \ue004
    Element Should Be Visible       css:div.item-form-field:nth-child(4) > div:nth-child(2) > span:nth-child(2) > svg:nth-child(1) > path:nth-child(1)
    Press Key                       id:roundBuy_id              \ue007
    Element Should Be Visible       css:div.item-form-field:nth-child(3) > div:nth-child(2) > span:nth-child(2) > svg:nth-child(1) > path:nth-child(1)
    Click Element                   css:.modal-dialog-cancel-button
    Sleep                           2 second
    Is Catalog

Valid Create New Product
    Click Element                   css:.btn-primary
    Is Add Product
    Input Text                      id:partSku_id                   ${random string}
    Input Text                      id:shortDescription_id          ${user last name}
    Input Text                      id:roundBuy_id                  ${round by}
    Input Text                      id:unitOfMeasure_id             ${warehouse number}
    Input Text                      id:manufacturerPartNumber_id    ${dynamic code}
    Input Text                      id:longDescription_id           ${dynamic adress1}
    Input Text                      id:manufacturer_id              ${dynamic adress2}
    Input Text                      id:productLvl1_id               ${level 1}
    Input Text                      id:productLvl2_id               ${level 2}
    Input Text                      id:productLvl3_id               ${level 3}
    Input Text                      id:attribute1_id                ${sub 1}
    Input Text                      id:attribute2_id                ${sub 2}
    Input Text                      id:attribute3_id                ${sub 3}
    Input Text                      id:gtin_id                      ${dynamic city}
    Input Text                      id:upc_id                       ${test string}
    Input Text                      id:alternative_id               ${test number}
    Input Text                      id:keyword_id                   ${keyword}
    Click Element                   css:.modal-dialog-ok-button

Checking New Product
    Sleep                           5 second
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[1]/div      ${random string}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[2]/div      ${dynamic code}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[3]/div      ${user last name}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[4]/div      ${dynamic adress1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[5]/div      ${dynamic adress2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[6]/div      ${round by}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[7]/div      ${level 1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[8]/div      ${level 2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[9]/div      ${level 3}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[10]/div     ${sub 1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[11]/div     ${sub 2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[12]/div     ${sub 3}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[13]/div     ${dynamic city}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[14]/div     ${test string}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[15]/div     ${test number}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[16]/div     ${keyword}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[17]/div     ${warehouse number}

Edit Product
    Click Element                   ${edit product button}
    Is Edit Product
    Click Element                   css:.close
    Sleep                           2 second
    Is Catalog
    Click Element                   ${edit product button}
    Click Element                   css:.modal-dialog-cancel-button
    Sleep                           2 second
    Is Catalog
    Click Element                   ${edit product button}
    Input Text                      id:partSku_id                       ${edit random string}
    Input Text                      id:shortDescription_id              ${edit last name}
    Input Text                      id:roundBuy_id                      ${edit round by}
    Input Text                      id:unitOfMeasure_id                 ${edit warehouse number}
    Input Text                      id:manufacturerPartNumber_id        ${edit code}
    Input Text                      id:longDescription_id               ${edit adress1}
    Input Text                      id:manufacturer_id                  ${edit adress2}
    Input Text                      id:productLvl1_id                   ${edit level 1}
    Input Text                      id:productLvl2_id                   ${edit level 2}
    Input Text                      id:productLvl3_id                   ${edit level 3}
    Input Text                      id:attribute1_id                    ${edit sub 1}
    Input Text                      id:attribute2_id                    ${edit sub 2}
    Input Text                      id:attribute3_id                    ${edit sub 3}
    Input Text                      id:gtin_id                          ${edit city}
    Input Text                      id:upc_id                           ${edit string}
    Input Text                      id:alternative_id                   ${edit test number}
    Input Text                      id:keyword_id                       ${edit keyword}
    Click Element                   css:.modal-dialog-ok-button

Checking Edit Product
    Sleep                           5 second
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[1]/div      ${edit random string}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[2]/div      ${edit code}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[3]/div      ${edit last name}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[4]/div      ${edit adress1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[5]/div      ${edit adress2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[6]/div      ${edit round by}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[7]/div      ${edit level 1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[8]/div      ${edit level 2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[9]/div      ${edit level 3}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[10]/div     ${edit sub 1}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[11]/div     ${edit sub 2}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[12]/div     ${edit sub 3}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[13]/div     ${edit city}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[14]/div     ${edit string}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[15]/div     ${edit test number}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[16]/div     ${edit keyword}
    Element Text Should Be          xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[17]/div     ${edit warehouse number}

Sorting Catalog
    [Tags]                          Sorting                 ProductSorting
    ${number of row}=               Evaluate                ${number of row}+1
    :FOR    ${colomn}               IN RANGE        1       18
    \   Click Element               xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[1]/table/thead/tr/th[${colomn}]
    \   ${text buffer1}             Get Text    xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[1]/td[${colomn}]/div
    \   Click Element               xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[1]/table/thead/tr/th[${colomn}]
    \   ${text buffer2}             Get Text    xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of row}]/td[${colomn}]/div
    \   Should Be Equal             ${text buffer1}         ${text buffer2}
    \   Click Element               xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[1]/table/thead/tr/th[${colomn}]

#Upload Template
#    [Tags]                          ChromeOnly
#    Choose File                     id:file-upload          /home/provorov/Downloads/product.csv
#    ${text buffer}                  Get Text                css:.import-page-alert > strong:nth-child(2)
#    Run Keyword If                  "${text buffer}"=="Successfully imported!"     Successfull Upload     ELSE IF     "${text buffer}"=="Operation failed!"     Fail Upload

*** Keywords ***
Preparation
    Goto Catalog
    Click Element                   id:pageDropDown
    Click Element                   css:li.dropdown-item:nth-child(4) > a:nth-child(1)
    Sleep                           5 second
    Number Of Rows
    ${number of new row}=           Evaluate                    ${number of row}+1
    ${buffer}=                      Generate Random String      18      [LETTERS]
    ${random string}=               Convert To Uppercase        ${buffer}
    ${buffer}=                      Generate Random String      18      [LETTERS]
    ${edit random string}=          Convert To Uppercase        ${buffer}
    Set Global Variable             ${random string}
    Set Global Variable             ${edit random string}
    Set Global Variable             ${number of new row}
    Set Global Variable             ${edit product button}      xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr[${number of new row}]/td[18]/div/div/button

Is Add Product
    Element Text Should Be          css:.modal-title            Add product

Is Edit Product
    Element Text Should Be          css:.modal-title            Edit product

Number Of Rows
    ${number of row}                Get Element Count           xpath:/html/body/div/div/div/div/div/div[2]/div/div[2]/div/div/div[3]/div/div/div/div/div[1]/div[2]/table/tbody/tr
    Set Global Variable             ${number of row}